(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{44917:function(){var e;(e||(e={})).product="product"},94989:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return k}});var a=i(44194),s=i(91181),o=i(26547),r=i(86115),l=i(8969);i(19111);var c=i(15443);i(43174);var d=i(76904),n=i(55979);i(79419),i(22286),i(88633);var u=i(94154),p=i(93718),g=i(56653),v=i(27412);let y=e=>e.flatMap(e=>"string"==typeof e?e:e.categoryId),I=({page:e,categories:t,sellers:i,subcategories:a})=>{let s=[];return Array.isArray(a)&&!(0,v.Z)(a)&&s.push({type:"subcategory",values:y(a)}),Array.isArray(t)&&!(0,v.Z)(t)&&s.push({type:"category",values:y(t)}),e&&s.push({type:"page",values:e.toString()}),Array.isArray(i)&&!(0,v.Z)(i)&&s.push({type:"seller",values:i}),s};var h=i(7967),m=i.n(h);let b=({cookies:e,filters:t,options:i,includePagination:s,productId:o,queryOptions:r={},route:l})=>{var c,d;let n=(0,p.useClient)(),v=(0,g.default)(),[y,h]=(0,a.useState)([]),[b,f]=(0,a.useState)(null),{fetchPolicy:w="cache-first",timeout:k=null===(d=null===(c=v.client)||void 0===c?void 0:c.showcase)||void 0===d?void 0:d.timeout}=r,P=({categories:e,customerId:t,includePagination:i=!1,page:a,pageId:s,partnerId:o,placeId:r,productId:l,sellers:c,showcaseId:d,storeId:p,subcategories:g,zipcode:v})=>(0,u.__awaiter)(void 0,void 0,void 0,function*(){var u;try{let{data:y}=yield n.query({context:{timeout:k},fetchPolicy:w,query:m(),variables:{customerId:t,filters:I({categories:e,sellers:c,page:a,subcategories:g}),includePagination:i,pageId:s,partnerId:o,placeId:r,productId:l,showcaseId:d,storeId:p,zipcode:v}}),b=null===(u=null==y?void 0:y.recommendation)||void 0===u?void 0:u.dynamic;h(b)}catch(e){f(e)}});return(0,a.useEffect)(()=>(P(Object.assign(Object.assign(Object.assign(Object.assign({productId:o,includePagination:s},e),t),i),l)),()=>{h([])}),[o,null==t?void 0:t.categories,null==t?void 0:t.subcategories,null==e?void 0:e.partnerId,null==e?void 0:e.customerId]),{error:b,getData:P,recommendation:y}};var f=i(74471);i(44917);var w=i(24069);let k=({productId:e,includePagination:t,pageId:i,placeId:u,showcaseId:p,categories:g,page:v,sellers:y,subcategories:I,className:h,type:m,spa:k=!0})=>{var P,C,E;let{publish:q}=(0,o.useEvents)(),S=(0,w.Y)(),Z=(0,r.Z)("rave/Showcase"),A=(0,s.useRouter)(),O=null===(P=A.query)||void 0===P?void 0:P.storeId,_=null===(C=A.query)||void 0===C?void 0:C.categoryId,j=null===(E=A.query)||void 0===E?void 0:E.subCategoryId,F=A.getCookie(d.i1),D=A.getCookie(d.PF),N=A.getCookie(d.VE),{city:T,state:z}=(0,l.Jv)(A),{isOnWishlist:W,removeFromWishlist:M,addToWishlist:V}=S,x={"showcase.betteroffer":"betteroffer","showcase.button":"button","showcase.carousel":"carousel","showcase.endless":"list","showcase.highlight":"highlight","showcase.list":"list","showcase.rank":"rank","showcase.side":"carousel"},J=(e,t,i)=>{let{id:a,title:s,price:o={}}=i;t?V({name:s,price:parseFloat(o.price),variationId:a}):M({variationId:a})},{error:R,recommendation:Y}=b({productId:e,includePagination:t,options:{pageId:i,placeId:u,showcaseId:p},filters:{categories:g,page:v,sellers:y,subcategories:I},route:{storeId:O},cookies:{customerId:F||"0",partnerId:D,zipcode:N}});return R?(Z.error(["Something went wrong while requesting Showcase data","Please make sure you are sending the correct variables","Error Message:",R].join("\n")),null):a.createElement(a.Fragment,null,null==Y?void 0:Y.map(({id:e,title:t,designTokenId:s,products:o},r)=>{let l=m||x[s];return a.createElement("div",{"data-testid":u},a.createElement(f.Z,{key:(0,n.Z)(t).concat(r.toString()),type:l,title:t,items:(0,c.Z)(o,W),className:h,onItemView:a=>((e,t,a)=>{let{id:s,title:o,type:r}=t;q("product:view",{value:{product:e,listPosition:a,eventData:{display:"rank"===r?"list":"gallery",filters:[_,j],list:o,listPosition:a,origin:"bob",type:"recomendacao",showcase:{id:s,pageId:i,placeId:u,title:o,type:r}},state:z,city:T}})})(a,{id:e,designTokenId:s,title:t,type:l},r+1),onItemClick:(a,o)=>((e,t,a,s)=>{e.preventDefault();let{id:o,title:r,type:l}=a;q("product:item:click",{value:{product:t,listPosition:s,eventData:{display:"rank"===l?"list":"gallery",filters:[_,j],list:r,listPosition:s,origin:"bob",type:"recomendacao",showcase:{id:o,pageId:i,placeId:u,title:r,type:l}},state:z,city:T}}),A.push(t.path,{spa:k})})(a,o,{id:e,designTokenId:s,title:t,type:l},r+1),onItemFavoriteClick:J}))}))}}}]);
//# sourceMappingURL=989-a5930c01e46a85b9.js.map