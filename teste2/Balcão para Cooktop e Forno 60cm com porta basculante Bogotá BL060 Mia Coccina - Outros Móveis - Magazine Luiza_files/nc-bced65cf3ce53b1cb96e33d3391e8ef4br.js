!function(){"use strict";function e(e){try{return e()}catch(e){return}}let t;window.VWO=window.VWO||[],window.VWO.v="7.0",window.VWO.v_e="257b305e9";const o=function(){if(void 0!==t)return t;const e=[],o=window.VWO._.allSettings.dataStore.campaigns;let n,i;for(let t in o)e.push(t);return t=!!(n=(window.location.search+window.location.hash).match(/.*_vis_test_id=(.*?)&.*_vis_opt_preview_combination=(.*)$/))&&(!(!e.includes(n[1])||!o[n[1]]||void 0===o[n[1]].combs[i=function(e){if(!e)return e;try{e=window.decodeURIComponent(e)}catch(e){}return e}(n[2])])&&i),t};class n{constructor(){var e,t;window.VWO._.phoenixMT.on("vwo_campaignsLoaded",(()=>{this.processLoadedCampaigns(),window.VWO.state="executionComplete"})),(null===(e=window.VWO._.phoenixMT.getEventHistory("vwo_campaignsLoaded"))||void 0===e?void 0:e.length)>0&&(this.processLoadedCampaigns(),(null===(t=window._vwoCc)||void 0===t?void 0:t.delayCustomGoal)||window.VWO._.phoenixMT.clearEventHistory("vwo_campaignsLoaded"))}processLoadedCampaigns(){this.setBucketedCampaigns(),this.executeAll({bucketed_campaigns:window.VWO._.bucketedCampaignsAPIStore.campaigns})}setBucketedCampaigns(){window.VWO._.bucketedCampaignsAPIStore=window.VWO._.bucketedCampaignsAPIStore||{},window.VWO._.bucketedCampaignsAPIStore.campaigns=[];let e=window._vis_debug||o()?"debug":"";e+="_vis_opt_exp_";const t=new RegExp(`^${e}(\\d{1,})_combi$`,""),n=document.cookie.split(";");for(let e=0;e<n.length;e++){const[o,i=""]=n[e].split("=").map((e=>e.trim())),a=t.exec(o);a&&_vwo_exp[a[1]]&&window.VWO._.bucketedCampaignsAPIStore.campaigns.push({[a[1]]:i,name:_vwo_exp[a[1]].name,variation:_vwo_exp[a[1]].comb_n[i]})}}executeAll(t={}){const o=e((()=>window.VWO._.bucketedCampaignsAPIStore.callbacks.length))||0;for(let n=0;n<o;n++){const o=window.VWO._.bucketedCampaignsAPIStore.callbacks[n];e((()=>"number"==typeof o.count))?o.count>0?(o(t),--o.count):(window.VWO._.bucketedCampaignsAPIStore.callbacks.splice(n,1),n--):o(t)}}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function i(e,t,o,n){return new(o||(o=Promise))((function(i,a){function s(e){try{d(n.next(e))}catch(e){a(e)}}function r(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))}const a="vwo_pageUnload",s="pageExitEvent";function r(){let e,t,o=0,n=0,i=0,a=0,s=document.querySelector("._vwo_scroll_fix");function r(e,t){return Math.round(e/t*100)}function d(d=!1){try{const{xScrollPercent:l,yScrollPercent:c,absXScroll:w,absYScroll:u,contentWidth:g,contentHeight:p}=function(){const e=s||document.documentElement,t=(null==s?void 0:s.scrollTop)||window.scrollY||window.pageYOffset,o=(null==s?void 0:s.scrollLeft)||window.scrollX||window.pageXOffset,n=e.scrollHeight,i=e.scrollWidth,a=window.innerHeight,d=window.innerWidth,l=t+a,c=r(l,n),w=o+d;return{xScrollPercent:r(w,i),yScrollPercent:c,absXScroll:w,absYScroll:l,contentWidth:i,contentHeight:n}}(),h=t<p,_=e<p;t=p,e=g,o=Math.max(w,o),n=Math.max(u,n),i=_&&!d?r(o,e):Math.max(l,i),a=h&&!d?r(n,t):Math.max(c,a)}catch(e){}}return d(),window.addEventListener("resize",(()=>d(!0))),s?s.addEventListener("scroll",(()=>d())):window.addEventListener("scroll",(()=>d())),{getFinalScrollValues:function(){return{xScrollDepthAbs:o,yScrollDepthAbs:n,xScrollDepthPercent:i>100?100:i,yScrollDepthPercent:a>100?100:a}},updateScrollState:d}}var d,l,c,w,u,g,p;!function(e){e.DOM="vwo_dom"}(d||(d={})),function(e){e.WILD_CARD="*",e.TRIGGER="trigger",e.POST_INIT="post-init",e.TIMER="vwo_timer"}(l||(l={})),function(e){e.URL_CHANGE="vwo_urlChange",e.LEAVE_INTENT="vwo_leaveIntent",e.CLICK_EVENT="vwo_dom_click",e.SUBMIT_EVENT="vwo_dom_submit",e.PAGE_LOAD_EVENT="vwo_page_load"}(c||(c={})),function(e){e.PAGE_VIEW="vwo_pageView",e.PAGE_UNLOAD_EVENT="vwo_pageUnload"}(w||(w={})),function(e){e.EXIT_CONDITIONS="__exitConditions"}(u||(u={})),function(e){e.DOM_CONTENT_LOADED="DOMContentLoaded",e.SCROLL="scroll",e.CLICK="click",e.SUBMIT="submit"}(g||(g={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(p||(p={}));var h=new class{constructor(e){this.setLevel(e)}setLevel(e="warn"){this.logLevel=p[e.toUpperCase()]}info(e,t={}){this.customLog(p.INFO,e,t)}debug(e,t={}){this.customLog(p.DEBUG,e,t)}warn(e,t={}){var o,n;this.customLog(p.WARN,e,t,null===(n=null===(o=window.VWO)||void 0===o?void 0:o._)||void 0===n?void 0:n.customError)}error(e,t={}){var o,n;this.customLog(p.ERROR,e,t,null===(n=null===(o=window.VWO)||void 0===o?void 0:o._)||void 0===n?void 0:n.customError)}customLog(e,t,o,n=null){var i,a,s;if(e>=this.logLevel){const r=this.formatMessage(e,t,o);null===(s=null===(a=null===(i=window.VWOEvents)||void 0===i?void 0:i.store)||void 0===a?void 0:a.actions)||void 0===s||s.addLogsForDebugging(r),n?n(r):this.consoleLog(e,[r])}}consoleLog(e,t){switch(e){case p.INFO:console.info(...t);break;case p.WARN:console.warn(...t);break;case p.ERROR:console.error(...t);break;default:console.log(...t)}}formatMessage(e,t,o){var n,i;const a=Object.keys(o).reduce(((e,t)=>e.replace(new RegExp(`{{${t}}}`,"g"),o[t])),t),s=`${d.DOM}_`;let r=o;const l=(null===(n=o.data)||void 0===n?void 0:n.vwoEventName)||o.vwoEventName;return l!==s+g.CLICK&&l!==s+g.SUBMIT||(r=o.data?null===(i=o.data)||void 0===i?void 0:i.props:r.props,r=r||{name:l}),`VWO: [${p[e].toUpperCase()}] [${(new Date).toUTCString()}] ${a} ${JSON.stringify(r)}`}}("warn");class _{constructor(){this.GoalsEnum=window.VWO._.GoalsEnum,this.eventName=a,this.attachedFilters=[],this.unloadListenersAttached=!1,this.registeredTriggers=[],this.unloadCaptured=!1,this.pageStartTime=performance?performance.timeOrigin:Date.now(),this.goalConverter=new window.VWO.modules.utils.goalUtils.GoalConversion("vwoPageUnloadData",[this.GoalsEnum.PAGE_UNLOAD,this.GoalsEnum.CUSTOM_GOAL]),window.VWO._.phoenixMT.on("vwo_campaignsLoaded",(()=>{this.updatePageUnloadTriggers()})),this.updatePageUnloadTriggers()}updatePageUnloadTriggers(){return i(this,void 0,void 0,(function*(){const e=yield window.fetcher.getValue("VWO._.pageUnloadTriggers");if(this.pageData=yield window.fetcher.getValue("VWO.pluginStorage.props.page"),!e)return;const t=Object.keys(e);if(this.registeredTriggers.length!==t.length){const e=this.extractPageUnloadFilters(t);this.attachedFilters=function(e){const t=[];return e.forEach((e=>{var o;null===(o=e.filters)||void 0===o||o.forEach(((o,n)=>{const i=o[0].substring(0,o[0].indexOf("."));if("event"===i||"page"===i){const i=JSON.parse(JSON.stringify(o));t.push({condition:i,triggerName:e.triggerName,condId:e.id,filterId:n})}}))})),t}(e),this.registeredTriggers=t,this.addListenersForPageUnload()}}))}extractPageUnloadFilters(e){var t;const o=[];for(let n=0;n<e.length;n++){const i=null===(t=window.VWO._.allSettings.triggers[e[n]])||void 0===t?void 0:t.cnds;for(let t=0;t<i.length;t++){if(0===Object.keys(i[t].filters).length)i[t].filters=[];else for(let e=0;e<i[t].filters.length;e++){const o=i[t].filters[e],n=o[0].match(/^page\.(.*)/);n&&(o[0]="event."+n[1])}o.push(Object.assign(Object.assign({},i[t]),{triggerName:e[n]}))}}return o}evaluateAndSendData(t){let o;const{getFinalScrollValues:n,updateScrollState:i}=this.initScrollTracking;i();const a=n();if(this.pageData)for(let e in this.pageData)t[e]=this.pageData[e];t.timeSpent=Math.floor((Date.now()-this.pageStartTime)/1e3),t.sdxp=a.xScrollDepthPercent,t.sdxa=a.xScrollDepthAbs,t.sdyp=a.yScrollDepthPercent,t.sdya=a.yScrollDepthAbs,window.VWO._.lastPageUnloadURL=this.pageData.url;try{t.preComputedConds=window.VWO.modules.utils.triggers.triggersConditionsCheck(this.eventName,t,this.attachedFilters),o={name:this.eventName,vwoEventName:this.eventName,preComputedConds:t.preComputedConds,page:this.pageData,timeSpent:t.timeSpent,sdxp:t.sdxp,sdxa:t.sdxa,sdyp:t.sdyp,sdya:t.sdya,postSyncCallback:function(){delete window.VWO._.lastPageUnloadURL}},this.goalConverter.fireEventForConversion(this.eventName,o,{eventData:t}),delete o.preComputedConds;const n=e((()=>o._vwo.eventDataConfig))||{};t._vwo=t._vwo||{},Object.keys(n).length&&(t._vwo.eventDataConfig=n),t._vwo.syncEventData=o}catch(t){h.error(t)}}resetStartTimeAndPageData(){this.pageStartTime=Date.now(),this.updatePageUnloadTriggers()}sendDataWrapper(e){return this.unloadCaptured?this.unloadCaptured=!1:(window.VWO._.phoenixMT.trigger(a,e),this.unloadCaptured=!0)}addListenersForPageUnload(){this.unloadListenersAttached||(window.VWO._.phoenixMT.on(a,(e=>{this.evaluateAndSendData(e)}),{syncToDataLayer:!0}),window.VWO._.phoenixMT.on(s,(e=>{this.sendDataWrapper(e)})),this.initScrollTracking=r(),window.VWO._.phoenixMT.on("vwo_urlChangeMt",(e=>{window.VWO._.phoenixMT.trigger(a,e),this.resetStartTimeAndPageData()})),this.unloadListenersAttached=!0)}}const v=()=>{window.VWO.modules.tags.sessionInfoService.eraseSessionCookie(),window.fetcher.setValue("window._vwo_uuid",null),window.fetcher.setValue("window.VWO._.allSettings.dataStore.uuid",null),window._vwo_uuid=null,window.VWO._.allSettings.dataStore.uuid=null,(()=>{const t=window.VWO._.cookies,o=t.getAll(),n=/^(debug)?(_vis_opt|_vwo)/;for(const i in o)if(n.test(i)){const o=/(_vis_opt_exp_|_vwo_uuid_)(\d+)/,n=e((()=>o.exec(i)[2]));n||"_vwo"==i?(t.createThirdParty(i,"",-1,null,n),i.includes("combi")&&t.createThirdParty(`_vis_opt_exp_${n}_combi_choose`,"",-1,null,n)):t.create(i,"",-1)}})(),Object.keys(window.localStorage).forEach((e=>{e.indexOf("vwo")>-1&&window.localStorage.removeItem(e)})),window.VWO._.sessionInfoService.setVisitorInformation("new"),e((()=>window.VWO._.crossStore.removeAll())),window.VWO._.phoenixMT.trigger("vwo.session.destroyed"),955434===window._vwo_acc_id&&e((()=>window.VWO._.tua.clearCallbacks()))};window.VWO._.destroySession?window.VWO._.destroySession(v):window.VWO._.destroySession=v,window.VWO._.ncLib=window.VWO._.ncLib||{};var m=!1;window.VWO._.ncLib.initNonCriticalLib=()=>{m||(new n,window.VWO.modules.phoenixPlugins.events.predefinedEvents.PageUnloadEvent=new _,m=!0)},window.VWO._.phoenixMT&&window.VWO._.phoenixMT.trigger("vwo_InitNCLib")}();

