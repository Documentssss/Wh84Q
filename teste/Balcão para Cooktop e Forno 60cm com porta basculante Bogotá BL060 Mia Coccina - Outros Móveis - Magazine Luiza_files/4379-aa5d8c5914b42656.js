"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4379],{43812:function(a,b,c){c.d(b,{"$":function(){return t},J:function(){return u}});var d=c(86522),e=c(34795),f=c(76854),g=c(59740),h=c(2784),i=c(79999),j=c(76613),k=c(7896),l=c(85942),m=["id"],n=["product"],o=function(a){var b,c,d,e,f,g=a.cookies,h=a.data,j=a.placements,k=(0,i.y$)("viewing-history"),m=k.get,n=(null==h?void 0:h.product)||{},o=n.category,p=void 0===o?{}:o,q=(null==h?void 0:null==(b=h.category)?void 0:null==(c=b[0])?void 0:c.id)||null,r=(null==(d=m())?void 0:null==(e=d.items)?void 0:e.map(function(a){return a.category.id}))||[],s=[],t=[];j.forEach(function(a){var b,c,d,e=a.name,g=a.categories,h=a.limit,i=a.slot,j=a.consumer,k=a.channel;"AdsShowcase"===e?t.push({categories:(b=p,c=r,d=q,(null==b?void 0:b.id)?[b.id]:d?[d]:(null==c?void 0:c.length)?(0,l.Z)(new Set(c)).slice(-5):["MO","EP","CM","UD","ME"]),consumer:j,limit:h,slot:i}):"AdsBanner"===e&&s.push({categories:g,consumer:j,limit:h,slot:i}),k&&(f=k)});var u=g||{},v=u.partnerId,w=u.location;return{banners:s,metadata:{channelCode:f,isLoyalty:!1,partnerId:v},products:t,zipcode:(null==w?void 0:w.zipCode)||""}},p=function(a){var b=a.components,c=a.cookies,d=a.data,e=[],f=function(a){if("AdsShowcase"===a.name||"AdsBanner"===a.name){var b=a.static,c=b.channel,d=b.categories,f=b.consumer,g=b.limit,h=b.slot,i=a.name,j={categories:d,channel:c,consumer:f,limit:g,name:i,slot:h};e.push(j)}},g=function a(b){f(b),(null==b?void 0:b.children)&&b.children.forEach(function(b){return a(b)}),"group"===b.type&&b.components.forEach(function(b){return a(b)})};return(b.forEach(function(a){return g(a)}),e.length)?o({cookies:c,data:d,placements:e}):null},q=["children"];function r(){r=function(){return a};var a={},b=Object.prototype,c=b.hasOwnProperty,e=Object.defineProperty||function(a,b,c){a[b]=c.value},f="function"==typeof Symbol?Symbol:{},g=f.iterator||"@@iterator",h=f.asyncIterator||"@@asyncIterator",i=f.toStringTag||"@@toStringTag";function j(a,b,c){return Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}),a[b]}try{j({},"")}catch(k){j=function(a,b,c){return a[b]=c}}function l(a,b,c,d){var f=Object.create((b&&b.prototype instanceof o?b:o).prototype);return e(f,"_invoke",{value:y(a,c,new C(d||[]))}),f}function m(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(d){return{type:"throw",arg:d}}}a.wrap=l;var n={};function o(){}function p(){}function q(){}var s={};j(s,g,function(){return this});var t=Object.getPrototypeOf,u=t&&t(t(D([])));u&&u!==b&&c.call(u,g)&&(s=u);var v=q.prototype=o.prototype=Object.create(s);function w(a){["next","throw","return"].forEach(function(b){j(a,b,function(a){return this._invoke(b,a)})})}function x(a,b){var f;function g(e,f,h,i){var j=m(a[e],a,f);if("throw"!==j.type){var k=j.arg,l=k.value;return l&&"object"==(0,d.Z)(l)&&c.call(l,"__await")?b.resolve(l.__await).then(function(a){g("next",a,h,i)},function(a){g("throw",a,h,i)}):b.resolve(l).then(function(a){k.value=a,h(k)},function(a){return g("throw",a,h,i)})}i(j.arg)}e(this,"_invoke",{value:function(a,c){function d(){return new b(function(b,d){g(a,c,b,d)})}return f=f?f.then(d,d):d()}})}function y(a,b,c){var d="suspendedStart";return function(e,f){if("executing"===d)throw Error("Generator is already running");if("completed"===d){if("throw"===e)throw f;return E()}for(c.method=e,c.arg=f;;){var g=c.delegate;if(g){var h=z(g,c);if(h){if(h===n)continue;return h}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if("suspendedStart"===d)throw d="completed",c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);d="executing";var i=m(a,b,c);if("normal"===i.type){if(d=c.done?"completed":"suspendedYield",i.arg===n)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(d="completed",c.method="throw",c.arg=i.arg)}}}function z(a,b){var c=a.iterator[b.method];if(void 0===c){if(b.delegate=null,"throw"===b.method){if(a.iterator.return&&(b.method="return",b.arg=void 0,z(a,b),"throw"===b.method))return n;b.method="throw",b.arg=TypeError("The iterator does not provide a 'throw' method")}return n}var d=m(c,a.iterator,b.arg);if("throw"===d.type)return b.method="throw",b.arg=d.arg,b.delegate=null,n;var e=d.arg;return e?e.done?(b[a.resultName]=e.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=void 0),b.delegate=null,n):e:(b.method="throw",b.arg=TypeError("iterator result is not an object"),b.delegate=null,n)}function A(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function B(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function C(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(A,this),this.reset(!0)}function D(a){if(a){var b=a[g];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var d=-1,e=function b(){for(;++d<a.length;)if(c.call(a,d))return b.value=a[d],b.done=!1,b;return b.value=void 0,b.done=!0,b};return e.next=e}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=q,e(v,"constructor",{value:q,configurable:!0}),e(q,"constructor",{value:p,configurable:!0}),p.displayName=j(q,i,"GeneratorFunction"),a.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===p||"GeneratorFunction"===(b.displayName||b.name))},a.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,q):(a.__proto__=q,j(a,i,"GeneratorFunction")),a.prototype=Object.create(v),a},a.awrap=function(a){return{__await:a}},w(x.prototype),j(x.prototype,h,function(){return this}),a.AsyncIterator=x,a.async=function(b,c,d,e,f){void 0===f&&(f=Promise);var g=new x(l(b,c,d,e),f);return a.isGeneratorFunction(c)?g:g.next().then(function(a){return a.done?a.value:g.next()})},w(v),j(v,i,"Generator"),j(v,g,function(){return this}),j(v,"toString",function(){return"[object Generator]"}),a.keys=function(a){var b=Object(a),c=[];for(var d in b)c.push(d);return c.reverse(),function a(){for(;c.length;){var d=c.pop();if(d in b)return a.value=d,a.done=!1,a}return a.done=!0,a}},a.values=D,C.prototype={constructor:C,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!a)for(var b in this)"t"===b.charAt(0)&&c.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var b=this;function d(c,d){return g.type="throw",g.arg=a,b.next=c,d&&(b.method="next",b.arg=void 0),!!d}for(var e=this.tryEntries.length-1;e>=0;--e){var f=this.tryEntries[e],g=f.completion;if("root"===f.tryLoc)return d("end");if(f.tryLoc<=this.prev){var h=c.call(f,"catchLoc"),i=c.call(f,"finallyLoc");if(h&&i){if(this.prev<f.catchLoc)return d(f.catchLoc,!0);if(this.prev<f.finallyLoc)return d(f.finallyLoc)}else if(h){if(this.prev<f.catchLoc)return d(f.catchLoc,!0)}else{if(!i)throw Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return d(f.finallyLoc)}}}},abrupt:function(a,b){for(var d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d];if(e.tryLoc<=this.prev&&c.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var f=e;break}}f&&("break"===a||"continue"===a)&&f.tryLoc<=b&&b<=f.finallyLoc&&(f=null);var g=f?f.completion:{};return g.type=a,g.arg=b,f?(this.method="next",this.next=f.finallyLoc,n):this.complete(g)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),n},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),B(c),n}},catch:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;B(c)}return e}}throw Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:D(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=void 0),n}},a}var s=(0,h.createContext)({}),t=function(a){var b,c=a.children,d=(0,g.Z)(a,q),l=d.data,o=d.structure,t=o.components,u=o.cookies,v=(0,j.useClient)(),w=(0,h.useState)(),x=(0,f.Z)(w,2),y=x[0],z=x[1],A=function(a){var b;return null==y?void 0:null==(b=y.banners)?void 0:b[a]},B=function(a){var b;return null==y?void 0:null==(b=y.products)?void 0:b[a]},C=(b=(0,e.Z)(r().mark(function a(){var b,c,d,e;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,d=p({components:t,cookies:u,data:l})){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,v.query({query:j.AdsQuery,variables:d});case 6:var f,h;z({banners:(f=(null==(e=a.sent)?void 0:null==(b=e.data.ads)?void 0:b.banners)||[]).reduce(function(a,b){return(a[b.slot]=a[b.slot]||[]).push(b),a},{}),products:(h=(null==e?void 0:null==(c=e.data.ads)?void 0:c.products)||[]).reduce(function(a,b){var c=b.product,d=c.id,e=(0,g.Z)(c,m),f=(0,g.Z)(b,n),h=(0,k.Z)({id:d},e,f);return(a[b.slot]=a[b.slot]||[]).push(h),a},{})}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.error("[useAdsProvider] - error: ".concat(a.t0));case 13:case"end":return a.stop()}},a,null,[[0,10]])})),function(){return b.apply(this,arguments)});return(0,h.useEffect)(function(){i.er.onClient&&C()},[l]),h.createElement(s.Provider,{value:{ads:y,getBannerBySlot:A,getProductsBySlot:B}},c)};t.defaultProps={data:{}};var u=function(){return(0,h.useContext)(s)}},89382:function(a,b,c){var d,e=c(71171),f=c(2784),g=c(99673),h=g.ZP.div(d||(d=(0,e.Z)(["\n  ",";\n"])),function(a){return a.layout}),i=function(a){var b=function(b){var c,d=b.layout,e="mod-".concat(null==(c=a.name)?void 0:c.toLowerCase());return Object.keys(d).length?f.createElement(h,{layout:d,"data-testid":e},f.createElement(a,b)):f.createElement(a,b)};return b.defaultProps={layout:{}},b.dataSource=a.dataSource,b.ssr=a.ssr,b.displayName=a.displayName||a.name,b};b.Z=i}}])
//# sourceMappingURL=4379-aa5d8c5914b42656.js.map